<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Panel Host</title>
  <style>
    body{font-family:system-ui,Segoe UI,Arial;margin:0;background:radial-gradient(circle at top,#162a4a,#0b1220);color:#fff}
    .wrap{max-width:920px;margin:30px auto;padding:16px}
    .card{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:18px;padding:18px;box-shadow:0 20px 40px rgba(0,0,0,.35)}
    h1{margin:0 0 6px}
    .muted{opacity:.75}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    button{flex:1;min-width:180px;padding:14px;border:0;border-radius:14px;font-weight:900;font-size:16px;cursor:pointer}
    .a{background:#43d17a}
    .b{background:#2f6fff;color:#fff}
    .c{background:#ff5c7c;color:#fff}
    .box{margin-top:12px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:12px}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;font-weight:900;background:#0ea5e9;color:#001a2b}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>üßë‚Äçüè´ Panel Host (Licda = t√∫)</h1>
      <div class="muted">Control en vivo ‚Äî El Viaje Digital del Cliente</div>

      <div class="box">
        <b>Estado:</b> <span class="pill" id="st">Cargando...</span>
        <div class="muted" style="margin-top:6px">Si los alumnos est√°n en index, al iniciar se ir√°n solos a <b>juego.html</b>.</div>
      </div>

      <div class="row">
        <button class="b" id="btnLobby">Mandar a Lobby</button>
        <button class="a" id="btnStart">Iniciar Juego</button>
        <button class="c" id="btnReset">Reset</button>
      </div>

      <div class="box">
        <b>Tip r√°pido:</b> abre esto en otra pesta√±a para alumnos: <span class="muted">index.html</span><br/>
        <span class="muted">Y t√∫ mant√©n abierto este panel.</span>
      </div>
    </div>
  </div>

  <script type="module">
    import { hostToLobby, hostStart, hostResetAll, listenPhase } from "./firebase.js";

    const st = document.getElementById("st");

    listenPhase((phase) => {
      st.textContent = phase === "game" ? "JUEGO" : "LOBBY";
    });

    document.getElementById("btnLobby").onclick = async () => {
      await hostToLobby();
      alert("Listo: todos al Lobby");
    };

    document.getElementById("btnStart").onclick = async () => {
      await hostStart();
      alert("¬°Juego iniciado! Los alumnos se redirigen solos.");
    };

    document.getElementById("btnReset").onclick = async () => {
      if (!confirm("¬øReset total? (borra conectados)")) return;
      await hostResetAll();
      alert("Reset listo");
    };
  </script>
</body>
</html>
