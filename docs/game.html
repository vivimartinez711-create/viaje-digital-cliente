<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>El Viaje Digital del Cliente â€” Juego</title>
<style>
  body{margin:0;font-family:system-ui,Segoe UI,Arial;color:#fff;min-height:100vh;background:linear-gradient(180deg,#0b56c1,#071a35)}
  .wrap{max-width:980px;margin:0 auto;padding:14px}
  .top{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin:10px 0 12px}
  .pill{padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.14);border:1px solid rgba(255,255,255,.18);font-weight:900}
  .card{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.18);border-radius:18px;padding:14px;box-shadow:0 20px 45px rgba(0,0,0,.35)}
  .q{font-size:20px;font-weight:900;margin:4px 0 8px}
  .muted{opacity:.85}
  .opts{display:grid;gap:8px;margin-top:10px}
  button{width:100%;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.12);color:#fff;font-weight:900;cursor:pointer;text-align:left}
  button:hover{background:rgba(255,255,255,.20)}
  button[disabled]{opacity:.55;cursor:not-allowed}
  .msg{margin-top:10px;font-weight:900}
  .good{color:#39d98a} .bad{color:#ff4d6d}
  .hearts{color:#ff2a67;letter-spacing:1px}
  .overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.78);padding:18px;z-index:999}
  .box{max-width:780px;background:#111827;border:1px solid rgba(255,255,255,.18);border-radius:18px;padding:18px;text-align:center}
  .conf{font-size:34px;letter-spacing:2px}
</style>
</head>
<body>
<div class="wrap">
  <div class="top">
    <span class="pill" id="salon">ğŸ« SalÃ³n 1 â€” MaÃ±ana</span>
    <span class="pill" id="nivel">Nivel 1</span>
    <span class="pill" id="vidas">Vidas: â™¥â™¥â™¥â™¥â™¥</span>
    <span class="pill" id="puntos">Puntos: 0</span>
  </div>

  <div class="card">
    <div class="q" id="question">â€”</div>
    <div class="muted" id="sub">â€”</div>
    <div class="opts" id="opts"></div>
    <div class="msg" id="msg"></div>
  </div>
</div>

<div class="overlay" id="ov">
  <div class="box">
    <div class="conf" id="conf">ğŸ“</div>
    <div style="font-size:20px;font-weight:900" id="ovTitle">Pausa</div>
    <div class="muted" id="ovText" style="margin-top:8px;line-height:1.6">â€”</div>
    <button id="close" style="margin-top:12px">Continuar</button>
  </div>
</div>

<script>
  const player = JSON.parse(localStorage.getItem("VDC_PLAYER") || "null");
  if(!player){ location.href="index.html"; }

  const QUESTIONS = [
    // NIVEL 1 (maÃ±ana) â€” 3
    {level:1,time:"maÃ±ana",q:"Â¿QuÃ© es la experiencia del cliente?", a:["El precio que paga","La publicidad","La percepciÃ³n total en todas sus interacciones","Solo el postventa"], c:2},
    {level:1,time:"maÃ±ana",q:"Â¿En quÃ© momento se construye la experiencia del cliente?", a:["Solo cuando compra","Solo cuando hay problema","Antes, durante y despuÃ©s de la compra","Al final"], c:2},
    {level:1,time:"maÃ±ana",q:"Rol principal de medios digitales:", a:["Reemplazar personas","Solo publicidad","Facilitar interacciÃ³n y servicio","Solo reducir costos"], c:2},

    // NIVEL 2 (tarde) â€” 4
    {level:2,time:"tarde",q:"Objetivo de estrategia digital centrada en cliente:", a:["Usar mÃ¡s plataformas","Reducir fricciones y generar valor","Automatizar todo","Solo redes"], c:1},
    {level:2,time:"tarde",q:"Clave para buena estrategia digital:", a:["Canales separados","Solo un canal","IntegraciÃ³n coherente","Solo tecnologÃ­a"], c:2},
    {level:2,time:"tarde",q:"Â¿QuÃ© mejora la experiencia digital?", a:["No escuchar al cliente","Conocer necesidades y expectativas","Copiar a la competencia","Cambiar el logo"], c:1},
    {level:2,time:"tarde",q:"Enfoque humano importa porque:", a:["TecnologÃ­a limitada","Reduce costos","DetrÃ¡s hay una persona","Lo digital no funciona"], c:2},

    // NIVEL 3 (noche) â€” 3
    {level:3,time:"noche",q:"Â¿QuÃ© hace bien Amazon en su experiencia digital?", a:["Procesos complicados","Falta de postventa","Plataforma Ã¡gil y personalizada","Uso limitado"], c:2},
    {level:3,time:"noche",q:"Â¿QuÃ© demuestra Cemaco respecto a medios digitales?", a:["No son necesarios","Mejoran la experiencia si se usan bien","Solo grandes empresas","Reemplazan lo fÃ­sico"], c:1},
    {level:3,time:"noche",q:"ConclusiÃ³n correcta:", a:["TecnologÃ­a lo resuelve todo","Depende solo del cliente","Estrategia digital centrada en personas","Elimina atenciÃ³n humana"], c:2},
  ];

  let i = 0;

  function hearts(n){ return "â™¥".repeat(Math.max(0,n)).split("").join(""); }
  function setBg(level){
    if(level===1) document.body.style.background="linear-gradient(180deg,#0b56c1,#071a35)";
    if(level===2) document.body.style.background="linear-gradient(180deg,#b45309,#111827)";
    if(level===3) document.body.style.background="linear-gradient(180deg,#4338ca,#0b1220)";
  }
  function salonLabel(level,time){
    if(level===1) return "ğŸ« SalÃ³n 1 â€” MaÃ±ana";
    if(level===2) return "ğŸ« SalÃ³n 2 â€” Tarde";
    return "ğŸ« SalÃ³n 3 â€” Noche";
  }

  function render(){
    const q = QUESTIONS[i];
    if(!q){
      // final
      showOverlay("ğŸ‰ Final", `La Licda entra con sus perritos ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶ a felicitarte.<br><br>
      <b>Tu puntaje:</b> ${player.score} â­<br>
      <b>Tu estado:</b> ${player.lives>0 ? "Terminaste el viaje ğŸ“" : "Quedaste fuera ğŸšª"}<br><br>
      ğŸ‰ Confeti para Top 3 (medalla solo al 1Â°) ğŸ¥‡`, "ğŸ‰");
      return;
    }

    setBg(q.level);
    document.getElementById("salon").textContent = salonLabel(q.level,q.time);
    document.getElementById("nivel").textContent = `Nivel ${q.level}`;
    document.getElementById("vidas").textContent = `Vidas: ${hearts(player.lives)}`;
    document.getElementById("puntos").textContent = `Puntos: ${player.score}`;

    document.getElementById("question").textContent = `(${i+1}/${QUESTIONS.length}) ${q.q}`;
    document.getElementById("sub").textContent = `Nivel ${q.level} â€” ${q.time}`;
    document.getElementById("msg").textContent = "";

    const letters=["A","B","C","D"];
    const opts = document.getElementById("opts");
    opts.innerHTML = q.a.map((t,idx)=>`<button data-idx="${idx}">${letters[idx]}) ${t}</button>`).join("");

    opts.querySelectorAll("button").forEach(b=>{
      b.onclick = ()=> answer(Number(b.dataset.idx));
    });
  }

  function showOverlay(title,text,conf="ğŸ“"){
    document.getElementById("conf").textContent = conf;
    document.getElementById("ovTitle").textContent = title;
    document.getElementById("ovText").innerHTML = text;
    document.getElementById("ov").style.display="flex";
  }
  function hideOverlay(){ document.getElementById("ov").style.display="none"; }

  document.getElementById("close").onclick = ()=>{
    hideOverlay();
    render();
  };

  function answer(choice){
    const q = QUESTIONS[i];
    document.querySelectorAll("#opts button").forEach(x=>x.disabled=true);

    if(choice===q.c){
      player.score += 10;
      localStorage.setItem("VDC_PLAYER", JSON.stringify(player));
      document.getElementById("msg").innerHTML = `<span class="good">âœ… Correcto.</span> Pasas al siguiente reto.`;
      i++;
      setTimeout(render, 650);
    }else{
      const before = player.lives;
      player.lives = Math.floor(player.lives/2);
      if(player.lives<0) player.lives=0;
      localStorage.setItem("VDC_PLAYER", JSON.stringify(player));

      if(player.lives===0){
        // pausa expulsiÃ³n + licda anima
        showOverlay("ğŸ›ï¸ Pausa â€” expulsiÃ³n", `
          El rector (traje gris, camisa blanca) te saca: <b>â€œSigue estudiando, suerte para el siguiente curso.â€</b><br><br>
          La Licda llega corriendo con sus perritos ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğŸ¶: <b>â€œEn la prÃ³xima lo lograrÃ¡s, no te desanimes.â€</b>
        `,"ğŸ“");
        i++; // igual avanza para cerrar el juego
      }else{
        document.getElementById("msg").innerHTML = `<span class="bad">âŒ Incorrecto.</span> Perdiste la mitad de tus vidas (${before} â†’ ${player.lives}).`;
        i++;
        setTimeout(render, 900);
      }
    }

    document.getElementById("vidas").textContent = `Vidas: ${hearts(player.lives)}`;
    document.getElementById("puntos").textContent = `Puntos: ${player.score}`;
  }

  render();
</script>
</body>
</html>
